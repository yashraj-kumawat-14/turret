<!DOCTYPE html>
<html>
  <head>
    <title>ESP32-CAM IP Display</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      body { font-family: Arial; text-align: center; padding-top: 30px; }
    </style>
  </head>
  <body>
    <h1>ESP32-CAM IP Address</h1>
    <p>Last Entry IP: <span id="lastIp">Loading...</span></p>

    <script>
      window.onload = function() {
        fetch('https://api.thingspeak.com/channels/2948792/feeds.json?api_key=JSRDQ9RHTFP58VKC&results=1')
          .then(response => response.json())
          .then(data => {
            let ip = data.feeds[0].field1;
            document.getElementById("lastIp").textContent = ip;
          })
          .catch(error => {
            console.error('Error fetching ThingSpeak data:', error);
            document.getElementById("lastIp").textContent = 'Error loading IP';
          });
      }
    </script>
  </body>
</html>
